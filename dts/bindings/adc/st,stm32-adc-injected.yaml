# Copyright (c) 2025 Rubus Technologies Inc.
# SPDX-License-Identifier: Apache-2.0

description: |
  STM32 ADC Injected Channel Driver
  
  This is a specialized driver for ultra low-latency motor control applications
  using hardware-triggered injected channel conversions. It is NOT compatible
  with the standard Zephyr ADC API.
  
  Inherits all base ADC properties from st,stm32-adc.yaml including clock
  configuration, pinctrl, resolution, etc.

compatible: "st,stm32-adc-injected"

include: st,stm32-adc.yaml

properties:
  resolution:
    type: int
    description: |
      ADC resolution in bits. Must match one of the resolutions available
      in the parent 'resolutions' property. For STM32H7, valid values are:
      16, 14, 12, 10, or 8 bits.
      If not specified, defaults to the first resolution in the resolutions array.

  st,adc-trigger-source:
    type: string
    required: true
    description: |
      External trigger source for injected channel conversions.
      Format: TIMx_CHy or TIMx_TRGO (uppercase, matches LL_ADC_INJ_TRIG_EXT_* defines).
      Valid values depend on the specific STM32 family. See STM32 LL driver headers
      (stm32xxxx_ll_adc.h) for available triggers on your MCU.
      
      Common examples:
        - TIM1_TRGO, TIM1_TRGO2, TIM1_CH4
        - TIM2_TRGO, TIM2_CH1
        - TIM3_TRGO, TIM3_CH1, TIM3_CH3, TIM3_CH4
        - TIM4_TRGO
        - TIM6_TRGO
        - TIM8_TRGO, TIM8_TRGO2, TIM8_CH4
        - TIM15_TRGO
  
  st,adc-trigger-edge:
    type: string
    default: "rising"
    description: |
      Edge sensitivity for external trigger.
    enum:
      - "rising"
      - "falling"
      - "both"